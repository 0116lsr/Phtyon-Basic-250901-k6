# 📚 3장: 자료구조 심화 완전 가이드

## 🎯 학습 목표
- 리스트를 스택과 큐로 활용하는 방법 이해
- 튜플의 불변성과 사용 사례 파악
- 세트의 집합 연산과 중복 제거 기능 학습
- 딕셔너리의 키-값 쌍 관리 방법 익히기
- collections 모듈의 고급 자료구조 활용법 학습

## 📖 핵심 개념

### 1. 리스트를 스택으로 활용
**스택 (Stack)**: LIFO (Last In, First Out) 구조
- 마지막에 들어온 데이터가 먼저 나감
- 접시를 쌓는 것과 같은 구조

**주요 메서드**:
- `append()`: 데이터 추가 (push)
- `pop()`: 마지막 데이터 제거 (pop)

```python
# 스택 구현
stack = []

# 데이터 추가 (push)
stack.append(1)
stack.append(2)
stack.append(3)
print(stack)  # [1, 2, 3]

# 데이터 제거 (pop)
last_item = stack.pop()
print(f"제거된 항목: {last_item}")  # 3
print(stack)  # [1, 2]
```

### 2. 리스트를 큐로 활용
**큐 (Queue)**: FIFO (First In, First Out) 구조
- 먼저 들어온 데이터가 먼저 나감
- 줄서기와 같은 구조

**주요 메서드**:
- `append()`: 데이터 추가 (enqueue)
- `pop(0)`: 첫 번째 데이터 제거 (dequeue)

```python
# 큐 구현
queue = []

# 데이터 추가 (enqueue)
queue.append(1)
queue.append(2)
queue.append(3)
print(queue)  # [1, 2, 3]

# 데이터 제거 (dequeue)
first_item = queue.pop(0)
print(f"제거된 항목: {first_item}")  # 1
print(queue)  # [2, 3]
```

### 3. 튜플 (Tuple)
**정의**: 변경할 수 없는(immutable) 순서가 있는 데이터 집합

**특징**:
- 소괄호 `()` 사용
- 생성 후 수정 불가
- 메모리 효율적
- 딕셔너리의 키로 사용 가능

```python
# 튜플 생성
coordinates = (10, 20)
colors = ("red", "green", "blue")
mixed = (1, "hello", 3.14, True)

# 접근
print(coordinates[0])  # 10
print(colors[1])       # "green"

# 수정 시도 (오류 발생)
# coordinates[0] = 5  # TypeError: 'tuple' object does not support item assignment
```

### 4. 세트 (Set)
**정의**: 중복이 없는 유일한 요소들의 집합

**특징**:
- 중괄호 `{}` 사용
- 중복 자동 제거
- 순서 없음 (Python 3.7+ 에서는 순서 보장)
- 집합 연산 지원

```python
# 세트 생성
numbers = {1, 2, 3, 4, 5}
fruits = {"apple", "banana", "orange"}

# 중복 제거
duplicates = [1, 2, 2, 3, 3, 3, 4]
unique_numbers = set(duplicates)
print(unique_numbers)  # {1, 2, 3, 4}

# 집합 연산
set1 = {1, 2, 3, 4}
set2 = {3, 4, 5, 6}

print(set1 | set2)   # 합집합: {1, 2, 3, 4, 5, 6}
print(set1 & set2)   # 교집합: {3, 4}
print(set1 - set2)   # 차집합: {1, 2}
print(set1 ^ set2)   # 대칭차집합: {1, 2, 5, 6}
```

### 5. 딕셔너리 (Dictionary)
**정의**: 키(key)와 값(value)의 쌍으로 이루어진 데이터 구조

**특징**:
- 중괄호 `{}` 사용
- 키는 유일해야 함
- 키로 값에 빠르게 접근 가능
- 순서 보장 (Python 3.7+)

```python
# 딕셔너리 생성
student = {
    "name": "김파이썬",
    "age": 20,
    "grade": "A",
    "subjects": ["수학", "영어", "과학"]
}

# 접근
print(student["name"])        # "김파이썬"
print(student.get("age"))    # 20 (안전한 접근)

# 수정
student["age"] = 21
student["city"] = "서울"      # 새 키-값 추가

# 삭제
del student["grade"]

# 모든 키, 값, 항목 출력
print(student.keys())    # dict_keys(['name', 'age', 'subjects', 'city'])
print(student.values())  # dict_values(['김파이썬', 21, ['수학', '영어', '과학'], '서울'])
print(student.items())   # dict_items([('name', '김파이썬'), ...])
```

### 6. Collections 모듈

#### 6.1 deque (Double-ended Queue)
**정의**: 양쪽 끝에서 빠르게 추가/삭제 가능한 자료구조

**주요 메서드**:
- `append()`: 오른쪽에 추가
- `appendleft()`: 왼쪽에 추가
- `pop()`: 오른쪽에서 제거
- `popleft()`: 왼쪽에서 제거
- `rotate()`: 요소들을 회전

```python
from collections import deque

# deque 생성
dq = deque([1, 2, 3, 4, 5])

# 양쪽 끝에서 추가/제거
dq.append(6)        # 오른쪽에 추가
dq.appendleft(0)    # 왼쪽에 추가
print(dq)           # deque([0, 1, 2, 3, 4, 5, 6])

# 회전
dq.rotate(2)        # 오른쪽으로 2칸 회전
print(dq)           # deque([5, 6, 0, 1, 2, 3, 4])
```

#### 6.2 Counter
**정의**: 요소의 개수를 세는 딕셔너리

```python
from collections import Counter

# 리스트에서 개수 세기
text = ["apple", "banana", "apple", "orange", "banana", "apple"]
counter = Counter(text)
print(counter)  # Counter({'apple': 3, 'banana': 2, 'orange': 1})

# 가장 많이 나타난 요소
print(counter.most_common(2))  # [('apple', 3), ('banana', 2)]

# 문자열에서 문자 개수 세기
word = "hello"
char_count = Counter(word)
print(char_count)  # Counter({'l': 2, 'h': 1, 'e': 1, 'o': 1})
```

#### 6.3 OrderedDict
**정의**: 순서가 보장되는 딕셔너리 (Python 3.7+ 에서는 일반 dict도 순서 보장)

```python
from collections import OrderedDict

# 순서가 보장되는 딕셔너리
ordered_dict = OrderedDict()
ordered_dict['first'] = 1
ordered_dict['second'] = 2
ordered_dict['third'] = 3

print(ordered_dict)  # OrderedDict([('first', 1), ('second', 2), ('third', 3)])
```

#### 6.4 namedtuple
**정의**: 이름이 있는 튜플 (클래스와 유사하지만 가벼움)

```python
from collections import namedtuple

# namedtuple 정의
Point = namedtuple('Point', ['x', 'y'])
Student = namedtuple('Student', ['name', 'age', 'grade'])

# 사용
p = Point(10, 20)
print(p.x, p.y)  # 10 20

s = Student("김파이썬", 20, "A")
print(s.name, s.age, s.grade)  # 김파이썬 20 A
```

## 🔧 실습 예제

### 예제 1: 스택을 이용한 괄호 검사
```python
def is_balanced(expression):
    """괄호가 올바르게 균형을 이루는지 검사"""
    stack = []
    pairs = {'(': ')', '[': ']', '{': '}'}
    
    for char in expression:
        if char in pairs:  # 여는 괄호
            stack.append(char)
        elif char in pairs.values():  # 닫는 괄호
            if not stack:
                return False
            last_open = stack.pop()
            if pairs[last_open] != char:
                return False
    
    return len(stack) == 0

# 테스트
print(is_balanced("()"))        # True
print(is_balanced("()[]{}"))    # True
print(is_balanced("([)]"))      # False
print(is_balanced("((("))       # False
```

### 예제 2: 큐를 이용한 작업 처리
```python
def process_tasks(tasks):
    """작업을 큐로 처리"""
    queue = tasks.copy()
    completed = []
    
    while queue:
        current_task = queue.pop(0)  # 첫 번째 작업 가져오기
        print(f"처리 중: {current_task}")
        completed.append(current_task)
    
    return completed

# 사용
tasks = ["이메일 확인", "보고서 작성", "회의 준비", "코드 리뷰"]
completed_tasks = process_tasks(tasks)
print(f"완료된 작업: {completed_tasks}")
```

### 예제 3: 세트를 이용한 데이터 정리
```python
def clean_data(data_list):
    """중복 제거 및 정렬"""
    # 중복 제거
    unique_data = set(data_list)
    
    # 리스트로 변환 후 정렬
    cleaned_data = sorted(list(unique_data))
    
    return cleaned_data

# 사용
raw_data = [1, 2, 2, 3, 3, 3, 4, 5, 5, 1]
cleaned = clean_data(raw_data)
print(f"원본: {raw_data}")
print(f"정리 후: {cleaned}")
```

### 예제 4: 딕셔너리를 이용한 학생 관리
```python
def manage_students():
    """학생 정보 관리 시스템"""
    students = {}
    
    while True:
        print("\n=== 학생 관리 시스템 ===")
        print("1. 학생 추가")
        print("2. 학생 조회")
        print("3. 학생 수정")
        print("4. 학생 삭제")
        print("5. 전체 학생 목록")
        print("0. 종료")
        
        choice = input("선택하세요: ")
        
        if choice == "1":
            name = input("이름: ")
            age = int(input("나이: "))
            grade = input("학년: ")
            students[name] = {"age": age, "grade": grade}
            print(f"{name} 학생이 추가되었습니다.")
            
        elif choice == "2":
            name = input("조회할 학생 이름: ")
            if name in students:
                info = students[name]
                print(f"이름: {name}, 나이: {info['age']}, 학년: {info['grade']}")
            else:
                print("해당 학생을 찾을 수 없습니다.")
                
        elif choice == "5":
            print("\n=== 전체 학생 목록 ===")
            for name, info in students.items():
                print(f"{name}: {info}")
                
        elif choice == "0":
            break

# 사용
# manage_students()
```

### 예제 5: Counter를 이용한 텍스트 분석
```python
from collections import Counter

def analyze_text(text):
    """텍스트 분석"""
    # 단어 분리
    words = text.lower().split()
    
    # 단어 개수 세기
    word_count = Counter(words)
    
    # 가장 많이 나타난 단어 5개
    most_common = word_count.most_common(5)
    
    print("=== 텍스트 분석 결과 ===")
    print(f"총 단어 수: {len(words)}")
    print(f"고유 단어 수: {len(word_count)}")
    print("\n가장 많이 나타난 단어:")
    for word, count in most_common:
        print(f"  {word}: {count}번")

# 사용
text = "Python is a great programming language. Python is easy to learn. Python is powerful."
analyze_text(text)
```

## ⚠️ 주의사항

1. **리스트의 pop(0)**:
   - 첫 번째 요소를 제거할 때 시간이 오래 걸림 (O(n))
   - 대용량 데이터에서는 deque 사용 권장

2. **튜플의 불변성**:
   - 튜플은 수정할 수 없음
   - 수정이 필요한 경우 리스트 사용

3. **세트의 순서**:
   - Python 3.7 이전에는 순서가 보장되지 않음
   - 순서가 중요한 경우 리스트 사용

4. **딕셔너리의 키**:
   - 키는 불변 타입이어야 함 (문자열, 숫자, 튜플 등)
   - 리스트는 키로 사용할 수 없음

5. **Collections 모듈**:
   - 일반적인 경우에는 기본 자료구조 사용
   - 특별한 성능이나 기능이 필요할 때만 사용

## 🎯 학습 체크리스트

- [ ] 리스트로 스택과 큐 구현하기
- [ ] 튜플의 불변성 이해하고 활용하기
- [ ] 세트로 중복 제거 및 집합 연산하기
- [ ] 딕셔너리로 키-값 쌍 관리하기
- [ ] deque로 양방향 큐 구현하기
- [ ] Counter로 데이터 개수 세기
- [ ] namedtuple로 구조화된 데이터 만들기
- [ ] 각 자료구조의 장단점 파악하기

## 🔗 관련 링크

- [파이썬 공식 문서 - 자료구조](https://docs.python.org/3/tutorial/datastructures.html)
- [파이썬 공식 문서 - collections 모듈](https://docs.python.org/3/library/collections.html)
- [이전 챕터: 함수와 문자열 처리](./02-함수와문자열처리.md)
- [다음 챕터: 고급 파이썬 기법](./04-고급파이썬기법.md)
